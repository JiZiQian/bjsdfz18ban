<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>留言板</title>
	<link rel="stylesheet" type="text/css" href="https://jiziqian.github.io/style.css">
	<script>
		let httpBackEnd;
		function init(){
			let ajaxHttp;
			if(window.XMLHttpRequest) ajaxHttp=new XMLHttpRequest();
			else ajaxHttp=new ActiveXObject("Microsoft.XMLHTTP");
			ajaxHttp.open("GET","https://bjsdfz17ban.github.io/domain/18666.txt?t="+Math.random(),false);
			ajaxHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
			ajaxHttp.send();
			httpBackEnd=ajaxHttp.responseText;
		}
		function onSubmit(){
			let text=document.getElementById("text").value;
			let ajaxSub;
			if(window.XMLHttpRequest) ajaxSub=new XMLHttpRequest();
			else ajaxSub=new ActiveXObject("Microsoft.XMLHTTP");
			ajaxSub.onreadystatechange=function(){}
			ajaxSub.open("POST",httpBackEnd,true);
			ajaxSub.setRequestHeader("Content-type","application/x-www-form-urlencoded");
			ajaxSub.send("text="+text+"&type=upload&mode=issue");
			document.getElementById("text").value="";
			document.getElementById("text").rows=2;
		}
	</script>
	<style>
		.issues {
			float: left;
			width: 62%;
			padding: 0px 0px 10px 0px;
		}
		.submit {
			float: right;
			width: 38%;
		}
		.main:after {
			content: "";
			display: table;
			clear: both;
		}
	</style>
</head>
<body>
	<div class="head">
		<h1>留言板</h1>
	</div>
	<div class="main">
		<div id="texts" class="issues"></div>
		<div class="submit">
			留言内容:<br/>
			<textarea id="text" placeholder="此处输入留言内容" style="width:95%" onscroll="this.rows++;"></textarea><br/>
			<button type="button" onclick="onSubmit()">提交</button>
		</div>
	</div>
	<div class="tail">
		<a href="https://jiziqian.github.io/bjsdfz18ban">回到首页</a>
	</div>
	<script>
		init();
		let texts;
		let ajaxAsk;
		if(window.XMLHttpRequest) ajaxAsk=new XMLHttpRequest();
		else ajaxAsk=new ActiveXObject("Microsoft.XMLHTTP");
		ajaxAsk.onreadystatechange=function(){
			if(ajaxAsk.readyState==4&&ajaxAsk.status==200){
				texts=ajaxAsk.responseText;
				document.getElementById("texts").innerHTML=texts;
			}
		}
		ajaxAsk.open("POST",httpBackEnd,true);
		ajaxAsk.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		ajaxAsk.send("type=getIssues&mode=issue");
	</script>
</body>
</html>
