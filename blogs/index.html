<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>博客</title>
	<script src="https://jiziqian.github.io/bjsdfz18ban/script.js"></script>
	<script src="https://jiziqian.github.io/bjsdfz18ban/user.js"></script>
	<!-- KaTaX:LaTeX -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.css" integrity="sha384-ko6T2DjISesD0S+wOIeHKMyKsHvWpdQ1s/aiaQMbL+TIXx3jg6uyf9hlv3WWfwYv" crossorigin="anonymous">
	<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.js" integrity="sha384-tsPOhveNsi36uhglzMBNOAA2xd7LlEqQuQHFKi4DwP+6UKrrLGub1MD77Zx18F8e" crossorigin="anonymous"></script>
	<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
	<!-- showdown:markdown -->
	<script src="https://unpkg.com/showdown/dist/showdown.min.js"></script>
	<!-- highlight -->
	<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.7.0/styles/a11y-dark.min.css">
	<script src="https://unpkg.com/@highlightjs/cdn-assets@11.7.0/highlight.min.js"></script>
    <script>
        function getBlogs(){
            init();
			let texts;
			let ajaxAsk;
			if(window.XMLHttpRequest) ajaxAsk=new XMLHttpRequest();
			else ajaxAsk=new ActiveXObject("Microsoft.XMLHTTP");
			ajaxAsk.open("POST",httpBackEnd,false);
			ajaxAsk.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=UTF-8");
			ajaxAsk.send("mode=blog&type=get");
            let blogs=JSON.parse(ajaxAsk.responseText);
        }
    </script>
	<link rel="stylesheet" type="text/css" href="https://jiziqian.github.io/style.css">
	<style>
		.blogs .select {
			float: left;
			width: 50%;
			padding: 0px 0px 10px 0px;
		}
		.submit {
			float: right;
			width: 50%;
		}
		.submit:after {
			content: "";
			display: table;
			clear: both;
		}
		.edit {
			float: left;
			width: 49%;
		}
		.display {
			float: right;
			width: 49%;
		}
		@media screen and (max-width:800px) {
			.issues{
				width:100%;
			}
			.submit{
				width:100%;
				position: relative;
				left: 10px;
			}
		}
	</style>
</head>
<body>
	<div class="head">
		<h1>博客导航</h1>
		<div id="user" class="user"></div>
	</div>
	<div class="main">
		<div class="submit">
			<div class="edit">
				博客内容:<br/>
				<textarea id="edit" placeholder="此处输入博客内容" onscroll="this.rows++;" style="width:100%;"></textarea><br/>
				<button type="button" onclick="onSubmit()">提交</button>
			</div>
			<div class="display">
				预览:<br/>
				<div id="display" style="width:100%;"></div>
			</div>
		</div>
		<div id="texts" class="select"></div>
		<div id="texts" class="issues"></div>
	</div>
	<div class="tail">
		<a href="https://jiziqian.github.io/bjsdfz18ban">回到首页</a>
	</div>
    <script>
		showdown.setOption('simpleLineBreaks', true);
		showdown.setOption('literalMidWordUnderscores', true);
		showdown.setOption('underline', true);
		document.addEventListener("DOMContentLoaded", function() {
			userInit();
            getBlogs();
			setInterval(function(){
				let converter=new showdown.Converter();
				document.getElementById("display").innerHTML=converter.makeHtml(document.getElementById("edit").value);
				renderMathInElement(document.getElementById("display"), {
          			delimiters: [
	            	  	{left: '$$', right: '$$', display: true},
              			{left: '$', right: '$', display: true},
              			{left: '\\(', right: '\\)', display: true},
              			{left: '\\[', right: '\\]', display: true}
          			],
          			// • rendering keys, e.g.:
          			throwOnError : false
        		});
				hljs.highlightAll();
			},1000);
    	});
	</script>
</body>
</html>